export default class TgWelle {

    constructor(n, tg) {
        this.nennmass = parseFloat(n)
        this.toleranzgrad = tg
    }
    
    static Toleranzgrade(){
        return {">3...6":{"c":-70,"d":-30,"e":-20,"f":-10,"g":-4,"h":0,"jb":-2,"k":1,"m":4,"n":8,"p":8,"r":15,"s":19,"t":"-","u":23,"x":28,"z":35,"za":42,"zb":50,"zc":80},"6...10":{"c":-80,"d":-40,"e":-25,"f":-13,"g":-5,"h":0,"jb":-2,"k":1,"m":6,"n":10,"p":10,"r":19,"s":23,"t":"-","u":28,"x":34,"z":42,"za":52,"zb":67,"zc":97},"10...14":{"c":-95,"d":-50,"e":-32,"f":-16,"g":-6,"h":0,"jb":-3,"k":1,"m":7,"n":12,"p":12,"r":23,"s":28,"t":"-","u":33,"x":40,"z":50,"za":64,"zb":90,"zc":130},"14...18":{"c":-95,"d":-50,"e":-32,"f":-16,"g":-6,"h":0,"jb":-3,"k":1,"m":7,"n":12,"p":12,"r":23,"s":28,"t":"-","u":33,"x":45,"z":60,"za":77,"zb":108,"zc":150},"18...24":{"c":-110,"d":-65,"e":-40,"f":-20,"g":-7,"h":0,"k":2,"m":8,"n":15,"p":22,"r":28,"s":35,"t":"-","u":41,"x":54,"z":73,"za":98,"zb":136,"zc":188},"24...30":{"c":-110,"d":-65,"e":-40,"f":-20,"g":-7,"h":0,"k":2,"m":8,"n":15,"p":22,"r":28,"s":35,"t":41,"u":48,"x":64,"z":88,"za":118,"zb":160,"zc":218},"30...40":{"c":-120,"d":-80,"e":-50,"f":-25,"g":-9,"h":0,"k":2,"m":9,"n":17,"p":26,"r":34,"s":43,"t":48,"u":60,"x":80,"z":112,"za":148,"zb":200,"zc":274},"40...50":{"c":-130,"d":-80,"e":-50,"f":-25,"g":-9,"h":0,"k":2,"m":9,"n":17,"p":26,"r":34,"s":43,"t":54,"u":70,"x":97,"z":136,"za":180,"zb":242,"zc":325},"50...65":{"c":-140,"d":-100,"e":-60,"f":-30,"g":-10,"h":0,"k":2,"m":11,"n":20,"p":32,"r":41,"s":53,"t":66,"u":87,"x":122,"z":172,"za":226,"zb":300,"zc":405},"65...80":{"c":-150,"d":-100,"e":-60,"f":-30,"g":-10,"h":0,"k":2,"m":11,"n":20,"p":32,"r":43,"s":59,"t":75,"u":102,"x":146,"z":210,"za":274,"zb":360,"zc":480},"80...100":{"c":-170,"d":-120,"e":-72,"f":-36,"g":-12,"h":0,"k":3,"m":13,"n":23,"p":37,"r":51,"s":71,"t":91,"u":124,"x":178,"z":258,"za":335,"zb":445,"zc":585},"100...120":{"c":-180,"d":-120,"e":-72,"f":-36,"g":-12,"h":0,"k":3,"m":13,"n":23,"p":37,"r":54,"s":79,"t":104,"u":144,"x":210,"z":310,"za":400,"zb":525,"zc":690},"120...140":{"c":-200,"d":-145,"e":-85,"f":-43,"g":-14,"h":0,"k":3,"m":15,"n":27,"p":43,"r":63,"s":92,"t":122,"u":170,"x":248,"z":365,"za":470,"zb":620,"zc":800},"140...160":{"c":-210,"d":-145,"e":-85,"f":-43,"g":-14,"h":0,"k":3,"m":15,"n":27,"p":43,"r":65,"s":100,"t":134,"u":190,"x":280,"z":415,"za":535,"zb":700,"zc":900},"160...180":{"c":-230,"d":-145,"e":-85,"f":-43,"g":-14,"h":0,"k":3,"m":15,"n":27,"p":43,"r":68,"s":108,"t":146,"u":210,"x":310,"z":465,"za":600,"zb":780,"zc":1000},"180...200":{"c":-240,"d":-170,"e":-100,"f":-50,"g":-15,"h":0,"k":4,"m":17,"n":31,"p":50,"r":77,"s":122,"t":166,"u":236,"x":350,"z":520,"za":670,"zb":880,"zc":1150},"200...225":{"c":-260,"d":-170,"e":-100,"f":-50,"g":-15,"h":0,"k":4,"m":17,"n":31,"p":50,"r":80,"s":130,"t":180,"u":258,"x":385,"z":575,"za":740,"zb":960,"zc":1250},"225...250":{"c":-280,"d":-170,"e":-100,"f":-50,"g":-15,"h":0,"k":4,"m":17,"n":31,"p":50,"r":84,"s":140,"t":196,"u":284,"x":425,"z":640,"za":820,"zb":1050,"zc":1350},"250...280":{"c":-300,"d":-190,"e":-110,"f":-56,"g":-17,"h":0,"k":4,"m":20,"n":34,"p":56,"r":94,"s":158,"t":218,"u":315,"x":475,"z":710,"za":920,"zb":1200,"zc":1550},"280...315":{"c":-330,"d":-190,"e":-110,"f":-56,"g":-17,"h":0,"k":4,"m":20,"n":34,"p":56,"r":98,"s":170,"t":240,"u":350,"x":525,"z":790,"za":1000,"zb":1300,"zc":1700},"315...355":{"c":-360,"d":-210,"e":-125,"f":-62,"g":-18,"h":0,"k":4,"m":21,"n":37,"p":62,"r":108,"s":190,"t":268,"u":390,"x":590,"z":900,"za":1150,"zb":1500,"zc":1900},"355...400":{"c":-400,"d":-210,"e":-125,"f":-62,"g":-18,"h":0,"k":4,"m":21,"n":37,"p":62,"r":114,"s":208,"t":294,"u":435,"x":660,"z":1000,"za":1300,"zb":1650,"zc":2100},"400...450":{"c":-440,"d":-230,"e":-135,"f":-68,"g":-20,"h":0,"k":5,"m":23,"n":40,"p":6,"r":126,"s":232,"t":330,"u":490,"x":740,"z":1100,"za":1450,"zb":1850,"zc":2400},"450...500":{"c":-480,"d":-230,"e":-135,"f":-68,"g":-20,"h":0,"k":5,"m":23,"n":40,"p":68,"r":132,"s":252,"t":360,"u":540,"x":820,"z":1250,"za":1600,"zb":2100,"zc":2600}}
    }

    getToleranzgrade() {
        return this.constructor.Toleranzgrade()
    }

    getNennmassbereiche() {
        let nennmassbereiche = this.getToleranzgrade()
        nennmassbereiche = Object.keys(nennmassbereiche).map(function(key) {
            return { 'min':parseInt(key.split('...')[0]),
                     'max':parseInt(key.split('...')[1]) }   
        });
        return nennmassbereiche
    }

    getNennmassbereich() {
        let result = this.getNennmassbereiche().findIndex(function(value) {
            return this.nennmass > value['min'] && this.nennmass <= value['max']
        }.bind(this))
        if(result == -1){
            throw { name: 'Fehler Toleranzgrad Welle', message: 'Nennmass ist ausserhalb des gültigen Bereichs (3<N<=500'}
        }
        return result
    }

    getGrundtoleranzFromNennmassbereich() {
        let result = this.getToleranzgrade()
        result = result[Object.keys(result)[this.getNennmassbereich()]];
        return result
    }

    getToleranzgrad() {
        let result = this.getGrundtoleranzFromNennmassbereich()[this.toleranzgrad]
        if(!result){
            throw { name: 'Fehler Toleranzgrad Welle', message: 'Toleranzgrad ist ausserhalb des gültigen Bereichs'}
        }
        return result
    }

}